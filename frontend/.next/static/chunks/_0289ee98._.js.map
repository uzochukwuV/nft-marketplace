{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS%20FX95G/Desktop/celusion/nft-marketplace/frontend/hooks/useWeb3Provider.tsx"],"sourcesContent":["\"use client\"\r\nimport { BrowserProvider, ethers, JsonRpcSigner } from \"ethers\"\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\n\r\nexport interface IWeb3State {\r\n    address: string | null;\r\n    currentChain: number | null;\r\n    signer: JsonRpcSigner | null;\r\n    provider: BrowserProvider | null;\r\n    isAuthenticated: boolean;\r\n}\r\n\r\nconst useWeb3Provider = () => {\r\n    const initialWeb3State = {\r\n        address: null,\r\n        currentChain: null,\r\n        signer: null,\r\n        provider: null,\r\n        isAuthenticated: false,\r\n    };\r\n\r\n    const [state, setState] = useState<IWeb3State>(initialWeb3State);\r\n\r\n    const connect = useCallback(async () => {\r\n        if (state.isAuthenticated) return;\r\n\r\n\r\n        try {\r\n            const { ethereum } = window as any;\r\n\r\n            if (!ethereum) {\r\n                console.log(\"no ethereum provider\")\r\n            }\r\n\r\n            const provider = new ethers.BrowserProvider(ethereum);\r\n\r\n            const accounts: string[] = await provider.send(\"eth_requestAccounts\", []);\r\n\r\n            if (accounts.length > 0) {\r\n                const signer = await provider.getSigner();\r\n                const chain = Number((await provider.getNetwork()).chainId);\r\n\r\n                setState({\r\n                    ...state,\r\n                    address: accounts[0],\r\n                    signer,\r\n                    currentChain: chain,\r\n                    provider,\r\n                    isAuthenticated: true,\r\n                });\r\n\r\n                localStorage.setItem(\"isAuthenticated\", \"true\");\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n    }, [state])\r\n\r\n\r\n    const disconnect = () => {\r\n        setState(initialWeb3State);\r\n        localStorage.removeItem(\"isAuthenticated\");\r\n    };\r\n\r\n\r\n    // automatically connects wallet if already connected before\r\n    useEffect(() => {\r\n        if (typeof window === \"undefined\") return; // Ensure it's running in the browser\r\n    \r\n        const isAuthenticated = localStorage.getItem(\"isAuthenticated\");\r\n    \r\n        if (isAuthenticated === \"true\" && !state.isAuthenticated) {\r\n            connect();\r\n        }\r\n    }, [connect, state.isAuthenticated]);\r\n\r\n    useEffect(() => {\r\n        if (typeof window.ethereum === \"undefined\") return;\r\n    \r\n        const handleAccountsChanged = (accounts: string[]) => {\r\n            if (accounts.length > 0) {\r\n                setState(prev => ({ ...prev, address: accounts[0] }));\r\n            } else {\r\n                // Optionally reset state if wallet disconnects\r\n                setState(prev => ({ ...prev, address: \"\", isAuthenticated: false }));\r\n                localStorage.removeItem(\"isAuthenticated\");\r\n            }\r\n        };\r\n    \r\n        const handleChainChanged = (chainId: string) => {\r\n            setState(prev => ({ ...prev, currentChain: Number(chainId) }));\r\n        };\r\n    \r\n        // window.ethereum.on(\"accountsChanged\", handleAccountsChanged);\r\n        // window.ethereum.on(\"chainChanged\", handleChainChanged); // ðŸ” Use 'chainChanged', not 'networkChanged'\r\n    \r\n        return () => {\r\n            // window.ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\r\n            // window.ethereum.removeListener(\"chainChanged\", handleChainChanged);\r\n        };\r\n    }, []);\r\n    \r\n\r\n\r\n    return {\r\n        state,\r\n        connect,\r\n        disconnect\r\n    }\r\n\r\n}\r\n\r\nexport default useWeb3Provider;"],"names":[],"mappings":";;;AACA;AACA;;AAFA;;;AAaA,MAAM,kBAAkB;;IACpB,MAAM,mBAAmB;QACrB,SAAS;QACT,cAAc;QACd,QAAQ;QACR,UAAU;QACV,iBAAiB;IACrB;IAEA,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAc;IAE/C,MAAM,UAAU,CAAA,GAAA,4RAAA,CAAA,cAAW,AAAD;gDAAE;YACxB,IAAI,MAAM,eAAe,EAAE;YAG3B,IAAI;gBACA,MAAM,EAAE,QAAQ,EAAE,GAAG;gBAErB,IAAI,CAAC,UAAU;oBACX,QAAQ,GAAG,CAAC;gBAChB;gBAEA,MAAM,WAAW,IAAI,uOAAA,CAAA,SAAM,CAAC,eAAe,CAAC;gBAE5C,MAAM,WAAqB,MAAM,SAAS,IAAI,CAAC,uBAAuB,EAAE;gBAExE,IAAI,SAAS,MAAM,GAAG,GAAG;oBACrB,MAAM,SAAS,MAAM,SAAS,SAAS;oBACvC,MAAM,QAAQ,OAAO,CAAC,MAAM,SAAS,UAAU,EAAE,EAAE,OAAO;oBAE1D,SAAS;wBACL,GAAG,KAAK;wBACR,SAAS,QAAQ,CAAC,EAAE;wBACpB;wBACA,cAAc;wBACd;wBACA,iBAAiB;oBACrB;oBAEA,aAAa,OAAO,CAAC,mBAAmB;gBAC5C;YACJ,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC;YAClB;QACJ;+CAAG;QAAC;KAAM;IAGV,MAAM,aAAa;QACf,SAAS;QACT,aAAa,UAAU,CAAC;IAC5B;IAGA,4DAA4D;IAC5D,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;qCAAE;YACN,uCAAmC;;YAAM,EAAE,qCAAqC;YAEhF,MAAM,kBAAkB,aAAa,OAAO,CAAC;YAE7C,IAAI,oBAAoB,UAAU,CAAC,MAAM,eAAe,EAAE;gBACtD;YACJ;QACJ;oCAAG;QAAC;QAAS,MAAM,eAAe;KAAC;IAEnC,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;qCAAE;YACN,IAAI,OAAO,OAAO,QAAQ,KAAK,aAAa;YAE5C,MAAM;mEAAwB,CAAC;oBAC3B,IAAI,SAAS,MAAM,GAAG,GAAG;wBACrB;+EAAS,CAAA,OAAQ,CAAC;oCAAE,GAAG,IAAI;oCAAE,SAAS,QAAQ,CAAC,EAAE;gCAAC,CAAC;;oBACvD,OAAO;wBACH,+CAA+C;wBAC/C;+EAAS,CAAA,OAAQ,CAAC;oCAAE,GAAG,IAAI;oCAAE,SAAS;oCAAI,iBAAiB;gCAAM,CAAC;;wBAClE,aAAa,UAAU,CAAC;oBAC5B;gBACJ;;YAEA,MAAM;gEAAqB,CAAC;oBACxB;wEAAS,CAAA,OAAQ,CAAC;gCAAE,GAAG,IAAI;gCAAE,cAAc,OAAO;4BAAS,CAAC;;gBAChE;;YAEA,gEAAgE;YAChE,yGAAyG;YAEzG;6CAAO;gBACH,4EAA4E;gBAC5E,sEAAsE;gBAC1E;;QACJ;oCAAG,EAAE;IAIL,OAAO;QACH;QACA;QACA;IACJ;AAEJ;GAlGM;uCAoGS","debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS%20FX95G/Desktop/celusion/nft-marketplace/frontend/context/web3Context.tsx"],"sourcesContent":["\"use client\"\r\nimport { createContext, FC, ReactNode, useContext } from \"react\";\r\nimport useWeb3Provider, { IWeb3State } from \"../hooks/useWeb3Provider\";\r\n\r\n\r\nexport interface IWeb3Context {\r\n    connect: () => Promise<void>;\r\n    disconnect: () => void;\r\n    state: IWeb3State;\r\n  }\r\n\r\nconst Web3Context = createContext<IWeb3Context | null>(null);\r\n\r\nconst Web3ContextProvider = ({children}:React.PropsWithChildren)=>{\r\n    const { connect, disconnect, state } = useWeb3Provider();\r\n\r\n\r\n    return (\r\n        <Web3Context.Provider\r\n          value={{\r\n            connect,\r\n            disconnect,\r\n            state,\r\n          }}\r\n        >\r\n          {children}\r\n        </Web3Context.Provider>\r\n      );\r\n}\r\n\r\nexport default Web3ContextProvider;\r\n\r\nexport const useWeb3Context = () => useContext(Web3Context);"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAWA,MAAM,4BAAc,CAAA,GAAA,4RAAA,CAAA,gBAAa,AAAD,EAAuB;AAEvD,MAAM,sBAAsB,CAAC,EAAC,QAAQ,EAAyB;;IAC3D,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,UAAe,AAAD;IAGrD,qBACI,4TAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;QACF;kBAEC;;;;;;AAGX;GAfM;;QACqC,4HAAA,CAAA,UAAe;;;KADpD;uCAiBS;AAER,MAAM,iBAAiB;;IAAM,OAAA,CAAA,GAAA,4RAAA,CAAA,aAAU,AAAD,EAAE;AAAW;IAA7C","debugId":null}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS%20FX95G/Desktop/celusion/nft-marketplace/frontend/components/connect-button.tsx"],"sourcesContent":["\"use client\"\r\nimport { useWeb3Context, IWeb3Context } from '@/context/web3Context'\r\nimport React, { useEffect } from 'react'\r\n\r\n\r\nfunction ConnectButton() {\r\n    const {state, connect, disconnect } = useWeb3Context() as IWeb3Context;\r\n    \r\n    return (\r\n        <div>\r\n           {\r\n            state.isAuthenticated ?\r\n            <button id=\"\" onClick={disconnect} className=\" bg-[#6154f3] text-white rounded-3xl px-4 py-2  \">Disconnect</button>:\r\n            <button id=\"\" onClick={()=>connect()} className=\" bg-[#6154f3] text-white rounded-3xl px-4 py-2  \">Connect</button>\r\n           }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ConnectButton"],"names":[],"mappings":";;;;AACA;;;AADA;;AAKA,SAAS;;IACL,MAAM,EAAC,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD;IAEnD,qBACI,4TAAC;kBAEG,MAAM,eAAe,iBACrB,4TAAC;YAAO,IAAG;YAAG,SAAS;YAAY,WAAU;sBAAmD;;;;;iCAChG,4TAAC;YAAO,IAAG;YAAG,SAAS,IAAI;YAAW,WAAU;sBAAmD;;;;;;;;;;;AAI/G;GAZS;;QACiC,0HAAA,CAAA,iBAAc;;;KAD/C;uCAcM","debugId":null}}]
}