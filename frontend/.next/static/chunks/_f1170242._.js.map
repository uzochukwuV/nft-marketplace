{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS%20FX95G/Desktop/celusion/nft-marketplace/frontend/hooks/useReadContract.tsx"],"sourcesContent":["import { AbiCoder, Contract } from \"ethers\";\r\nimport { useMemo } from \"react\";\r\n\r\nimport BaseMarketABI from \"@/abi/BaseMarket.json\"\r\n\r\nimport BaseNftABI from \"@/abi/BaseNft.json\"\r\nimport BaseCoinABI from \"@/abi/BaseCoin.json\"\r\nimport { IWeb3Context, useWeb3Context } from \"@/context/web3Context\";\r\n\r\n\r\nexport const coin = \"0xc8dc2a0c2ee0cdc3bea8961176bd88638e7634f6\"\r\nexport const nft = \"0x30f6d11a066ec1343091b2dc108e6c3cd7faec10\"\r\nexport const market = \"0xd22caba8dfe5eb0ee64ec5f9b059a91874f4be84\"\r\n\r\ninterface ContractNames {\r\n    contracts: \"BaseMarket\" | \"BaseCoin\" | \"BaseNft\"\r\n}\r\n\r\nconst useContract = ({ contracts }: ContractNames) => {\r\n    const { state } = useWeb3Context() as IWeb3Context;\r\n    const ContractABI = contracts == \"BaseMarket\" ? BaseMarketABI : contracts == \"BaseCoin\" ? BaseCoinABI : BaseNftABI;\r\n    const address = contracts == \"BaseMarket\" ? market : contracts == \"BaseCoin\" ? coin : nft;\r\n    return useMemo(\r\n        () => state.signer && new Contract(address, ContractABI[\"abi\"], state.signer),\r\n        [state.signer]\r\n    );\r\n};\r\n\r\nexport default useContract;\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;AAEA;AACA;AACA;;;;;;;;AAGO,MAAM,OAAO;AACb,MAAM,MAAM;AACZ,MAAM,SAAS;AAMtB,MAAM,cAAc,CAAC,EAAE,SAAS,EAAiB;;IAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD;IAC/B,MAAM,cAAc,aAAa,eAAe,yFAAA,CAAA,UAAa,GAAG,aAAa,aAAa,uFAAA,CAAA,UAAW,GAAG,sFAAA,CAAA,UAAU;IAClH,MAAM,UAAU,aAAa,eAAe,SAAS,aAAa,aAAa,OAAO;IACtF,OAAO,CAAA,GAAA,4RAAA,CAAA,UAAO,AAAD;+BACT,IAAM,MAAM,MAAM,IAAI,IAAI,mNAAA,CAAA,WAAQ,CAAC,SAAS,WAAW,CAAC,MAAM,EAAE,MAAM,MAAM;8BAC5E;QAAC,MAAM,MAAM;KAAC;AAEtB;GARM;;QACgB,0HAAA,CAAA,iBAAc;;;uCASrB","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS%20FX95G/Desktop/celusion/nft-marketplace/frontend/components/transactions.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { IWeb3Context, useWeb3Context } from '@/context/web3Context';\r\nimport useContract, { market } from '@/hooks/useReadContract';\r\nimport { ethers } from 'ethers';\r\n\r\nimport React, { useEffect, useState } from 'react'\r\n\r\nfunction UserTransacions() {\r\n    const { state } = useWeb3Context() as IWeb3Context;\r\n    const market_contract = useContract({ contracts: \"BaseMarket\" });\r\n    const nft_contract = useContract({ contracts: \"BaseNft\" });\r\n    const [transactions , setTransactions] = useState<any>()\r\n    const [isLoading, setLoading] = useState<boolean>(false);\r\n\r\n    useEffect(() => {\r\n        getUserLogs()\r\n    }, [])\r\n    \r\n\r\n    async function getUserLogs() {\r\n        setLoading(true)\r\n        const filter = market_contract?.filters.AssetListed(null, null, null);\r\n        const block = await market_contract?.deploymentTransaction()?.getBlock()\r\n        const events = await market_contract?.queryFilter(filter!,block?.number,  \"latest\")\r\n\r\n        console.log(events)\r\n\r\n        let eventData = []\r\n\r\n        for (const event of events!){\r\n            const [tokenId,price, address] = (event as any)?.args as any;\r\n            console.log(address)\r\n            if(address.toLowerCase() == state.address){\r\n                eventData.push({price, address, tokenId, type:\"AssetListed\", contract:\"BaseMarket\"});\r\n            }\r\n        }\r\n        setTransactions(eventData)\r\n        console.log(eventData)\r\n        const filter2 = market_contract?.filters.AssetPurchased(null, null, null);\r\n        const events2 = await market_contract?.queryFilter(filter!,block?.number,  \"latest\")\r\n        \r\n        let eventData2 = []\r\n\r\n        for (const event of events2!){\r\n            const [tokenId,price, address, address2 ] = (event as any)?.args as any;\r\n            console.log(address)\r\n            if(address.toLowerCase() == state.address || address2.toLowerCase() == state.address){\r\n                eventData2.push({price, address, tokenId, type:\"AssetPurchased\", contract:\"BaseMarket\"});\r\n            }\r\n        }\r\n        console.log(eventData2)\r\n        setLoading(false)\r\n      }\r\n  return (\r\n    <div>\r\n        <section className='relative antialiased text-pretty px-12'>\r\n                <div className='space-y-4'>\r\n                    {  !isLoading &&\r\n                        transactions?.map((trx:any)=>{\r\n                            return <div className=' px-6 rounded-2xl py-4 bg-zinc-600 flex justify-between items-center'>\r\n                                <div>\r\n                                    {trx.contract} \r\n                                </div>\r\n                                <div>\r\n                                    {trx.type}\r\n                                </div>\r\n                                <div>\r\n                                    to :{trx.address}\r\n                                </div>\r\n                                <div>\r\n                                    data: {trx.price} {trx.tokenId}\r\n                                </div>\r\n                            </div>\r\n                        })\r\n                    }\r\n                </div>\r\n        </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserTransacions"],"names":[],"mappings":";;;;AAEA;AACA;AAGA;;;AANA;;;;AAQA,SAAS;;IACL,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,0HAAA,CAAA,iBAAc,AAAD;IAC/B,MAAM,kBAAkB,CAAA,GAAA,4HAAA,CAAA,UAAW,AAAD,EAAE;QAAE,WAAW;IAAa;IAC9D,MAAM,eAAe,CAAA,GAAA,4HAAA,CAAA,UAAW,AAAD,EAAE;QAAE,WAAW;IAAU;IACxD,MAAM,CAAC,cAAe,gBAAgB,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD;IAChD,MAAM,CAAC,WAAW,WAAW,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAW;IAElD,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;qCAAE;YACN;QACJ;oCAAG,EAAE;IAGL,eAAe;QACX,WAAW;QACX,MAAM,SAAS,iBAAiB,QAAQ,YAAY,MAAM,MAAM;QAChE,MAAM,QAAQ,MAAM,iBAAiB,yBAAyB;QAC9D,MAAM,SAAS,MAAM,iBAAiB,YAAY,QAAQ,OAAO,QAAS;QAE1E,QAAQ,GAAG,CAAC;QAEZ,IAAI,YAAY,EAAE;QAElB,KAAK,MAAM,SAAS,OAAQ;YACxB,MAAM,CAAC,SAAQ,OAAO,QAAQ,GAAI,OAAe;YACjD,QAAQ,GAAG,CAAC;YACZ,IAAG,QAAQ,WAAW,MAAM,MAAM,OAAO,EAAC;gBACtC,UAAU,IAAI,CAAC;oBAAC;oBAAO;oBAAS;oBAAS,MAAK;oBAAe,UAAS;gBAAY;YACtF;QACJ;QACA,gBAAgB;QAChB,QAAQ,GAAG,CAAC;QACZ,MAAM,UAAU,iBAAiB,QAAQ,eAAe,MAAM,MAAM;QACpE,MAAM,UAAU,MAAM,iBAAiB,YAAY,QAAQ,OAAO,QAAS;QAE3E,IAAI,aAAa,EAAE;QAEnB,KAAK,MAAM,SAAS,QAAS;YACzB,MAAM,CAAC,SAAQ,OAAO,SAAS,SAAU,GAAI,OAAe;YAC5D,QAAQ,GAAG,CAAC;YACZ,IAAG,QAAQ,WAAW,MAAM,MAAM,OAAO,IAAI,SAAS,WAAW,MAAM,MAAM,OAAO,EAAC;gBACjF,WAAW,IAAI,CAAC;oBAAC;oBAAO;oBAAS;oBAAS,MAAK;oBAAkB,UAAS;gBAAY;YAC1F;QACJ;QACA,QAAQ,GAAG,CAAC;QACZ,WAAW;IACb;IACJ,qBACE,4TAAC;kBACG,cAAA,4TAAC;YAAQ,WAAU;sBACX,cAAA,4TAAC;gBAAI,WAAU;0BACR,CAAC,aACA,cAAc,IAAI,CAAC;oBACf,qBAAO,4TAAC;wBAAI,WAAU;;0CAClB,4TAAC;0CACI,IAAI,QAAQ;;;;;;0CAEjB,4TAAC;0CACI,IAAI,IAAI;;;;;;0CAEb,4TAAC;;oCAAI;oCACI,IAAI,OAAO;;;;;;;0CAEpB,4TAAC;;oCAAI;oCACM,IAAI,KAAK;oCAAC;oCAAE,IAAI,OAAO;;;;;;;;;;;;;gBAG1C;;;;;;;;;;;;;;;;AAMxB;GAxES;;QACa,0HAAA,CAAA,iBAAc;QACR,4HAAA,CAAA,UAAW;QACd,4HAAA,CAAA,UAAW;;;KAH3B;uCA0EM","debugId":null}}]
}