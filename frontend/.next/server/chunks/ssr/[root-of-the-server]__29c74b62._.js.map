{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS%20FX95G/Desktop/celusion/nft-marketplace/frontend/hooks/useWeb3Provider.tsx"],"sourcesContent":["\"use client\"\r\nimport { BrowserProvider, ethers, JsonRpcSigner } from \"ethers\"\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\n\r\nexport interface IWeb3State {\r\n    address: string | null;\r\n    currentChain: number | null;\r\n    signer: JsonRpcSigner | null;\r\n    provider: BrowserProvider | null;\r\n    isAuthenticated: boolean;\r\n}\r\n\r\nconst useWeb3Provider = () => {\r\n    const initialWeb3State = {\r\n        address: null,\r\n        currentChain: null,\r\n        signer: null,\r\n        provider: null,\r\n        isAuthenticated: false,\r\n    };\r\n\r\n    const [state, setState] = useState<IWeb3State>(initialWeb3State);\r\n\r\n    const connect = useCallback(async () => {\r\n        if (state.isAuthenticated) return;\r\n\r\n\r\n        try {\r\n            const { ethereum } = window as any;\r\n\r\n            if (!ethereum) {\r\n                console.log(\"no ethereum provider\")\r\n            }\r\n\r\n            const provider = new ethers.BrowserProvider(ethereum);\r\n\r\n            const accounts: string[] = await provider.send(\"eth_requestAccounts\", []);\r\n\r\n            if (accounts.length > 0) {\r\n                const signer = await provider.getSigner();\r\n                const chain = Number((await provider.getNetwork()).chainId);\r\n\r\n                setState({\r\n                    ...state,\r\n                    address: accounts[0],\r\n                    signer,\r\n                    currentChain: chain,\r\n                    provider,\r\n                    isAuthenticated: true,\r\n                });\r\n\r\n                localStorage.setItem(\"isAuthenticated\", \"true\");\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n        }\r\n    }, [state])\r\n\r\n\r\n    const disconnect = () => {\r\n        setState(initialWeb3State);\r\n        localStorage.removeItem(\"isAuthenticated\");\r\n    };\r\n\r\n\r\n    // automatically connects wallet if already connected before\r\n    useEffect(() => {\r\n        if (typeof window === \"undefined\") return; // Ensure it's running in the browser\r\n    \r\n        const isAuthenticated = localStorage.getItem(\"isAuthenticated\");\r\n    \r\n        if (isAuthenticated === \"true\" && !state.isAuthenticated) {\r\n            connect();\r\n        }\r\n    }, [connect, state.isAuthenticated]);\r\n\r\n    useEffect(() => {\r\n        if (typeof window.ethereum === \"undefined\") return;\r\n    \r\n        const handleAccountsChanged = (accounts: string[]) => {\r\n            if (accounts.length > 0) {\r\n                setState(prev => ({ ...prev, address: accounts[0] }));\r\n            } else {\r\n                // Optionally reset state if wallet disconnects\r\n                setState(prev => ({ ...prev, address: \"\", isAuthenticated: false }));\r\n                localStorage.removeItem(\"isAuthenticated\");\r\n            }\r\n        };\r\n    \r\n        const handleChainChanged = (chainId: string) => {\r\n            setState(prev => ({ ...prev, currentChain: Number(chainId) }));\r\n        };\r\n    \r\n        // window.ethereum.on(\"accountsChanged\", handleAccountsChanged);\r\n        // window.ethereum.on(\"chainChanged\", handleChainChanged); // ðŸ” Use 'chainChanged', not 'networkChanged'\r\n    \r\n        return () => {\r\n            // window.ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\r\n            // window.ethereum.removeListener(\"chainChanged\", handleChainChanged);\r\n        };\r\n    }, []);\r\n    \r\n\r\n\r\n    return {\r\n        state,\r\n        connect,\r\n        disconnect\r\n    }\r\n\r\n}\r\n\r\nexport default useWeb3Provider;"],"names":[],"mappings":";;;AACA;AACA;AAFA;;;AAaA,MAAM,kBAAkB;IACpB,MAAM,mBAAmB;QACrB,SAAS;QACT,cAAc;QACd,QAAQ;QACR,UAAU;QACV,iBAAiB;IACrB;IAEA,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAc;IAE/C,MAAM,UAAU,CAAA,GAAA,oUAAA,CAAA,cAAW,AAAD,EAAE;QACxB,IAAI,MAAM,eAAe,EAAE;QAG3B,IAAI;YACA,MAAM,EAAE,QAAQ,EAAE,GAAG;YAErB,IAAI,CAAC,UAAU;gBACX,QAAQ,GAAG,CAAC;YAChB;YAEA,MAAM,WAAW,IAAI,oOAAA,CAAA,SAAM,CAAC,eAAe,CAAC;YAE5C,MAAM,WAAqB,MAAM,SAAS,IAAI,CAAC,uBAAuB,EAAE;YAExE,IAAI,SAAS,MAAM,GAAG,GAAG;gBACrB,MAAM,SAAS,MAAM,SAAS,SAAS;gBACvC,MAAM,QAAQ,OAAO,CAAC,MAAM,SAAS,UAAU,EAAE,EAAE,OAAO;gBAE1D,SAAS;oBACL,GAAG,KAAK;oBACR,SAAS,QAAQ,CAAC,EAAE;oBACpB;oBACA,cAAc;oBACd;oBACA,iBAAiB;gBACrB;gBAEA,aAAa,OAAO,CAAC,mBAAmB;YAC5C;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC;QAClB;IACJ,GAAG;QAAC;KAAM;IAGV,MAAM,aAAa;QACf,SAAS;QACT,aAAa,UAAU,CAAC;IAC5B;IAGA,4DAA4D;IAC5D,CAAA,GAAA,oUAAA,CAAA,YAAS,AAAD,EAAE;QACN,wCAAmC,QAAQ,qCAAqC;;QAEhF,MAAM;IAKV,GAAG;QAAC;QAAS,MAAM,eAAe;KAAC;IAEnC,CAAA,GAAA,oUAAA,CAAA,YAAS,AAAD,EAAE;QACN,IAAI,OAAO,OAAO,QAAQ,KAAK,aAAa;QAE5C,MAAM,wBAAwB,CAAC;YAC3B,IAAI,SAAS,MAAM,GAAG,GAAG;gBACrB,SAAS,CAAA,OAAQ,CAAC;wBAAE,GAAG,IAAI;wBAAE,SAAS,QAAQ,CAAC,EAAE;oBAAC,CAAC;YACvD,OAAO;gBACH,+CAA+C;gBAC/C,SAAS,CAAA,OAAQ,CAAC;wBAAE,GAAG,IAAI;wBAAE,SAAS;wBAAI,iBAAiB;oBAAM,CAAC;gBAClE,aAAa,UAAU,CAAC;YAC5B;QACJ;QAEA,MAAM,qBAAqB,CAAC;YACxB,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,cAAc,OAAO;gBAAS,CAAC;QAChE;QAEA,gEAAgE;QAChE,yGAAyG;QAEzG,OAAO;QACH,4EAA4E;QAC5E,sEAAsE;QAC1E;IACJ,GAAG,EAAE;IAIL,OAAO;QACH;QACA;QACA;IACJ;AAEJ;uCAEe","debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS%20FX95G/Desktop/celusion/nft-marketplace/frontend/context/web3Context.tsx"],"sourcesContent":["\"use client\"\r\nimport { createContext, FC, ReactNode, useContext } from \"react\";\r\nimport useWeb3Provider, { IWeb3State } from \"../hooks/useWeb3Provider\";\r\n\r\n\r\nexport interface IWeb3Context {\r\n    connect: () => Promise<void>;\r\n    disconnect: () => void;\r\n    state: IWeb3State;\r\n  }\r\n\r\nconst Web3Context = createContext<IWeb3Context | null>(null);\r\n\r\nconst Web3ContextProvider = ({children}:React.PropsWithChildren)=>{\r\n    const { connect, disconnect, state } = useWeb3Provider();\r\n\r\n\r\n    return (\r\n        <Web3Context.Provider\r\n          value={{\r\n            connect,\r\n            disconnect,\r\n            state,\r\n          }}\r\n        >\r\n          {children}\r\n        </Web3Context.Provider>\r\n      );\r\n}\r\n\r\nexport default Web3ContextProvider;\r\n\r\nexport const useWeb3Context = () => useContext(Web3Context);"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAWA,MAAM,4BAAc,CAAA,GAAA,oUAAA,CAAA,gBAAa,AAAD,EAAuB;AAEvD,MAAM,sBAAsB,CAAC,EAAC,QAAQ,EAAyB;IAC3D,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,yHAAA,CAAA,UAAe,AAAD;IAGrD,qBACI,6WAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;QACF;kBAEC;;;;;;AAGX;uCAEe;AAER,MAAM,iBAAiB,IAAM,CAAA,GAAA,oUAAA,CAAA,aAAU,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS%20FX95G/Desktop/celusion/nft-marketplace/frontend/components/connect-button.tsx"],"sourcesContent":["\"use client\"\r\nimport { useWeb3Context, IWeb3Context } from '@/context/web3Context'\r\nimport React, { useEffect } from 'react'\r\n\r\n\r\nfunction ConnectButton() {\r\n    const {state, connect, disconnect } = useWeb3Context() as IWeb3Context;\r\n    \r\n    return (\r\n        <div>\r\n           {\r\n            state.isAuthenticated ?\r\n            <button id=\"\" onClick={disconnect} className=\" bg-[#6154f3] text-white rounded-3xl px-4 py-2  \">Disconnect</button>:\r\n            <button id=\"\" onClick={()=>connect()} className=\" bg-[#6154f3] text-white rounded-3xl px-4 py-2  \">Connect</button>\r\n           }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ConnectButton"],"names":[],"mappings":";;;;AACA;AADA;;;AAKA,SAAS;IACL,MAAM,EAAC,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,uHAAA,CAAA,iBAAc,AAAD;IAEnD,qBACI,6WAAC;kBAEG,MAAM,eAAe,iBACrB,6WAAC;YAAO,IAAG;YAAG,SAAS;YAAY,WAAU;sBAAmD;;;;;iCAChG,6WAAC;YAAO,IAAG;YAAG,SAAS,IAAI;YAAW,WAAU;sBAAmD;;;;;;;;;;;AAI/G;uCAEe","debugId":null}}]
}